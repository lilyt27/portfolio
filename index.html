import { useState } from "react";
import { motion, AnimatePresence } from "framer-motion";

export default function FridgePortfolio() {
  const [open, setOpen] = useState(false);
  const [activeItem, setActiveItem] = useState(null);

  return (
    <div className="min-h-screen bg-[#FAF7F2] flex items-center justify-center p-8 font-['Poppins','Nunito',sans-serif]">
      <div className="relative w-[420px] h-[760px] perspective-[1400px]">
        {/* Fridge Body */}
        <div className="absolute inset-0 rounded-[2.5rem] bg-[#F3EFE8] shadow-[0_40px_80px_rgba(0,0,0,0.25)] border border-white" />

        {/* Interior Lighting */}
        <AnimatePresence>
          {open && (
            <motion.div
              initial={{ opacity: 0 }}
              animate={{ opacity: 1 }}
              exit={{ opacity: 0 }}
              className="absolute inset-3 rounded-[2.2rem] bg-gradient-to-b from-[#FFF6DD] to-transparent pointer-events-none"
            />
          )}
        </AnimatePresence>

        {/* Interior */}
        <AnimatePresence>
          {open && (
            <motion.div
              initial={{ opacity: 0, y: 40 }}
              animate={{ opacity: 1, y: 0 }}
              exit={{ opacity: 0 }}
              transition={{ duration: 0.7 }}
              className="absolute inset-6 flex flex-col gap-6"
            >
              <Shelf>
                <Fruit icon="ðŸ¥¤" label="Experience" onClick={() => setActiveItem("experience")} />
                <Fruit icon="ðŸ”" label="Projects" onClick={() => setActiveItem("projects")} />
              </Shelf>

              <Shelf>
                <Fruit icon="ðŸŠ" label="About" onClick={() => setActiveItem("about")} />
                <Fruit icon="ðŸ¥¦" label="Skills" onClick={() => setActiveItem("skills")} />
              </Shelf>

              <Shelf>
                <Fruit icon="ðŸž" label="Education" onClick={() => setActiveItem("education")} />
                <Fruit icon="ðŸ“" label="Awards" onClick={() => setActiveItem("awards")} />
              </Shelf>
            </motion.div>
          )}
        </AnimatePresence>

        {/* Door */}
        <motion.div
          onClick={() => setOpen(!open)}
          animate={{ rotateY: open ? -115 : 0 }}
          transition={{ duration: 1.2, ease: [0.4, 0, 0.2, 1] }}
          style={{ transformOrigin: "left center" }}
          className="absolute inset-0 rounded-[2.5rem] bg-[#EDE6DA] shadow-2xl cursor-pointer"
        >
          <div className="absolute right-4 top-1/3 w-3 h-40 bg-slate-100 rounded-full shadow-inner" />

          <div className="h-full flex flex-col items-center justify-center text-slate-700 text-center px-6">
            <h1 className="text-5xl font-extrabold">Lily Tang</h1>
            <p className="mt-3 text-sm">UX â€¢ Product â€¢ Creative Marketing</p>
            <p className="mt-1 text-xs opacity-70">open for fresh ideas</p>
          </div>

          <div className="absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-3">
            <Magnet label="GBDA" />
            <Magnet label="UX" />
            <Magnet label="ðŸŽ¥" />
            <Magnet label="âš½" />
          </div>
        </motion.div>

        {/* Modal */}
        <AnimatePresence>
          {activeItem && (
            <motion.div
              initial={{ opacity: 0 }}
              animate={{ opacity: 1 }}
              exit={{ opacity: 0 }}
              className="absolute inset-0 bg-black/40 rounded-[2.5rem] flex items-center justify-center"
              onClick={() => setActiveItem(null)}
            >
              <motion.div
                initial={{ scale: 0.85, y: 30 }}
                animate={{ scale: 1, y: 0 }}
                exit={{ scale: 0.85, y: 30 }}
                className="bg-white rounded-3xl p-6 w-[85%] shadow-2xl"
                onClick={(e) => e.stopPropagation()}
              >
                <Content type={activeItem} />
              </motion.div>
            </motion.div>
          )}
        </AnimatePresence>
      </div>
    </div>
  );
}

function Shelf({ children }) {
  return (
    <div className="flex justify-around items-end bg-[#FFFFFF] rounded-xl p-4 shadow-[inset_0_-2px_0_rgba(0,0,0,0.05)] border border-[#E5E0D8]">
      {children}
    </div>
  );
}

function Fruit({ icon, label, onClick }) {
  return (
    <motion.button
      whileHover={{ y: -6, scale: 1.08 }}
      whileTap={{ scale: 0.95 }}
      onClick={onClick}
      className="flex flex-col items-center"
    >
      <div className="text-5xl">{icon}</div>
      <span className="mt-2 text-xs font-semibold text-slate-700">{label}</span>
    </motion.button>
  );
}

function Content({ type }) {
  const content = {
    about: "Hi, Iâ€™m Lily â€” a GBDA student at the University of Waterloo passionate about UX, product design, and playful, human-centered digital experiences.",
    projects: "ShopPin (UX/Product Design), StarLit (ElleHacks personalized bedtime story app)",
    experience: "Marketing Intern @ Turbo AI â€¢ UGC Creator @ Dragonfruit Ventures â€¢ Ops & Marketing Intern @ RHSC â€¢ Soccer Coach & Camp Counsellor",
    skills: "UX Design, Figma, Product Thinking, Storytelling, Creative Strategy",
    education: "University of Waterloo â€” Global Business & Digital Arts (GBDA)",
    awards: "1st GTA â€¢ 2nd Ontario â€¢ Skills Ontario TV & Video Production",
    resume: "Download my resume (PDF)",
    linkedin: "linkedin.com/in/lily-tang-0535572aa",
    email: "lily.tang@email.com",
  };

  return (
    <div>
      <h2 className="text-2xl font-extrabold capitalize mb-3">{type}</h2>
      <p className="text-slate-600 text-sm leading-relaxed">{content[type]}</p>
    </div>
  );
}

function Magnet({ label }) {
  return (
    <div className="w-10 h-10 bg-white rounded-xl flex items-center justify-center text-xs font-bold shadow-md rotate-[-4deg]">
      {label}
    </div>
  );
}
